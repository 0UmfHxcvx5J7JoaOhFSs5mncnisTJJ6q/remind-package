{
    "collab_server" : "",
    "contents" : "#' Calculates normalized prices of a commodity\n#' \n#' Read PVP data of a certain commodity from a GDX file into a magpie object\n#' and normalize it with the 2005 goods price.\n#' \n#' \n#' @param gdx a GDX list as created by readGDX, or the file name of a gdx\n#' file(file name is recommended as this speeds up the code)\n#' @param level spartiel resolution \"glo\" = global or \"reg\" = regional\n#' @param enty one of the traded commodities in REMIND: good, pecoal, pegas,\n#' peoil, pebiolc, peur, perm\n#' @param type calculate present values (PVP(t)/PVP_Good(2005)) or nominal\n#' values(PVP(t)/PVP_Good(t))\n#' @return normalized price data as MAgPIE object\n#' @author Niklas Roming\n#' @examples\n#' \n#'   \\dontrun{\n#'     coal <- calcPrice(gdx, enty = \"pecoal\")\n#'     gas <- calcPrice(gdx, enty = \"pegas\")\n#'   }\n#' \n#' @export\n#' @importFrom magclass getYears\ncalcPrice <- function(gdx,level=\"glo\",enty=\"good\",type=\"nominal\"){\n  \n  tmp <- readPVP(gdx,level,enty)\n  tmp1 <- readPVP(gdx,level,enty=\"good\")\n  \n  if(type==\"present\"){\n    \n    # this is a workaround: previous to REMIND revision XXXX, fix2010 GDXes do not\n    # contain prices for 2005 and 2010 (needed for normalization below)\n    # Code below lloks if there is a BAU gdx and uses the prices given there\n    if(tmp1[ ,2005 , ] == 0){\n      if(file.exists(file.path(dirname(gdx), \"input_bau.gdx\"))){\n        tmp1 <- readPVP(file.path(dirname(gdx), \"input_bau.gdx\"),\n                        level, enty=\"good\")\n      } else stop(\"No prices for 2005 found (needed for normalization)!\")\n    }\n    \n    #normalization with the 2005 value\n    tmp <- tmp / as.numeric(tmp1[, 2005, ])\n    \n  } else if(type==\"nominal\"){\n    tmp <- tmp / as.numeric(tmp1[,getYears(tmp),])\n  } else if(type==\"raw\"){\n    tmp <- tmp\n  }\n  \n  return(tmp)\n}\n",
    "created" : 1489761727231.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "919883036",
    "id" : "BE323E0E",
    "lastKnownWriteTime" : 1533202911,
    "last_content_update" : 1533202911,
    "path" : "~/Documents/work/libraries/remind/R/calcPrice.R",
    "project_path" : "R/calcPrice.R",
    "properties" : {
    },
    "relative_order" : 8,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}